.\" Text automatically generated by txt2man
.TH collect-config.sh 1 "12 Dezember 2012" "save configuration in a repository" "1.12"
.SH NAME
\fBcollect-config.sh \fP- keep trach of configuration file changes
.SH SYNOPSIS
.nf
.fam C
collect-config.sh [\fB-l\fP|\fB--list-orphans\fP] [\fB-r\fP|\fB--remove-orphans\fP]
                  [\fB-d\fP|\fB--diff\fP [\fB-R\fP|\fB--revision\fP <rev>]]
                  [\fB--collect-config\fP] [\fB--check-permissions\fP]
                  [\fB--check-packages\fP] [\fB--check-links\fP]
                  [-?|\fB-h\fP|\fB--help\fP] [\fB-v\fP|\fB--version\fP]
.fam T
.fi
.fam T
.fi
.SH DESCRIPTION
collect-config.sh uses a configuration file in Bash Syntax. This
file helps to keep track of the configuration which differs from
the system's default. Once a day all files which are part of
COLLECTION will be copied and checked in to the repository. This
makes it possible to keep track of changes.
Collect-config can also maintain a list of installed packages. It
will warn when a package is not installed or differs from the named
version. With the PACKAGE list it is easy to install all needed
packages if a reinstall is requiered.
Collect-config can also check for soft- and hardlinks as well as
the right permissions on files.
If called without any arguments collect-config.sh will copy and
check in all COLLECTIONs. It will check if all PACKAGEs are installed,
it will check if all SOFTLINKs and HARDLINKs exists and it will
check if all PERMISSIONs and ownership are set as configured.
.SH OPTIONS
.TP
.B
\fB-l\fP|\fB--list-orphans\fP
list all files in the repository which are not
part of a COLLECTION
.TP
.B
\fB-r\fP|\fB--remove-orphans\fP
remove all files in the repository which are not
part of a COLLECTION
.TP
.B
\fB-d\fP|\fB--diff\fP
compare the system configuration with the
repository configuration
.TP
.B
\fB-R\fP|\fB--revision\fP=#
compare system with repository revision #
.TP
.B
\fB--collect-config\fP
copy and check in configuration files only
.TP
.B
\fB--check-permissions\fP
check permissions and ownership only
.TP
.B
\fB--check-packages\fP
check installed packages only
.TP
.B
\fB--check-links\fP
check if hard- and softlinks exitsts, only
.TP
.B
-?|\fB-h\fP|\fB--help\fP
emit short usage message and bail out
.TP
.B
\fB-v\fP|\fB--version\fP
ouput version information and exit
.SH FILES
.TP
.B
/usr/bin/collect-config.sh
- bash script
.TP
.B
/etc/collect-config.conf
- configuration file
.TP
.B
/etc/profile.d/functions.in.sh
- functions used by collect-config.sh
.TP
.B
/usr/share/doc/packages/collect-config/README
- some further explanations
.SH CONFIGURATION
Set the options in collect-config.conf according to your needs.
.TP
.B
CONFDIR
- where to store the COLLECTION (== repository)
.TP
.B
RCSREPO
- the directory name rcs uses to save its *,v files
.TP
.B
COLLECTION
- configuration files
.TP
.B
PACKAGE
- package with an optinal version string
.TP
.B
SOFTLINK
- softlink which must exist
.TP
.B
HARDLINK
- hardlink which must exist
.TP
.B
PERMISSION
- permission and ownership of a file
.SH EXAMPLE
Main configuration file (collect-config.conf) example:
.PP
CONFIDR=/opt/config
.PP
COLLECTION[logrotate]="/etc/logrotate.d/log-* /etc/logrotate.d/syslog"
.PP
COLLECTION[sysconfig]="/etc/sysconfig/cron /etc/sysconfig/mail"
.RE
.PP

.RS
PACKAGE[postfix]="2.9.5"
.PP
PACKAGE[lighttpd]=""
.RE
.PP

.RS
SOFTLINK[/usr/local/sbin/amavisd-nanny]="/usr/sbin/nanny /sbin/nanny"
.PP
PERMISSION[/srv/log/firewall]='2770:root:log'
.SH LICENSE
collect-config.sh is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 3 of the License, or
(at your option) any later version.
.PP
This program is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
GNU General Public License for more details.
.PP
You should have received a copy of the GNU General Public License
along with this program. If not, see http://www.gnu.org/licenses/.
.SH REPORTING BUGS
Report bugs to <projects@localside.net>
.SH AUTHORS
Stefan Jakobs
.PP
This manual page was written by Stefan Jakobs <projects@localside.net>
